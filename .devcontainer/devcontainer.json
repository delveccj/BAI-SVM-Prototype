{
  "name": "BAI SVM Desktop Environment",
  "dockerFile": "Dockerfile",
  "context": "..",
  
  // Features to install
  "features": {
    "ghcr.io/devcontainers/features/desktop-lite:1": {
      "password": "vscode",
      "webPort": "6080",
      "vncPort": "5901"
    },
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/python:1": {
      "version": "3.11"
    }
  },

  // Configure tool-specific properties
  "customizations": {
    "vscode": {
      "extensions": [
        // Live Share extensions
        "ms-vsliveshare.vsliveshare",
        "ms-vsliveshare.vsliveshare-audio",
        "ms-vsliveshare.vsliveshare-pack",
        
        // GitHub Copilot
        "github.copilot",
        "github.copilot-chat",
        
        // Python development
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.black-formatter",
        "ms-python.flake8",
        
        // Jupyter
        "ms-toolsai.jupyter",
        "ms-toolsai.jupyter-keymap",
        "ms-toolsai.jupyter-renderers",
        "ms-toolsai.vscode-jupyter-cell-tags",
        "ms-toolsai.vscode-jupyter-slideshow",
        
        // Git and GitHub
        "github.vscode-pull-request-github",
        "eamodio.gitlens",
        
        // Productivity
        "ms-vscode.vscode-json",
        "redhat.vscode-yaml",
        "ms-vscode.hexeditor",
        "christian-kohler.path-intellisense",
        
        // Theme and UI
        "pkief.material-icon-theme",
        "zhuangtongfa.material-theme"
      ],
      
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": false,
        "python.linting.flake8Enabled": true,
        "python.formatting.provider": "black",
        "jupyter.askForKernelRestart": false,
        "liveshare.audio": true,
        "liveshare.anonymousGuestApproval": "accept",
        "liveshare.guestApprovalRequired": false,
        "liveshare.showInStatusBar": "whileCollaborating",
        "github.copilot.enable": {
          "*": true,
          "yaml": false,
          "plaintext": false,
          "markdown": true,
          "python": true,
          "jupyter": true
        },
        "workbench.colorTheme": "Material Theme Ocean",
        "workbench.iconTheme": "material-icon-theme",
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },

  // Forward ports
  "forwardPorts": [
    6080,  // noVNC web interface
    5901,  // VNC server
    8000,  // Professor server
    8888,  // Jupyter
    5000   // Flask development
  ],
  
  "portsAttributes": {
    "6080": {
      "label": "Desktop (noVNC)",
      "onAutoForward": "openBrowser"
    },
    "5901": {
      "label": "VNC Server"
    },
    "8000": {
      "label": "Professor Dashboard"
    },
    "8888": {
      "label": "Jupyter Lab"
    }
  },

  // Lifecycle scripts
  "postCreateCommand": "bash .devcontainer/setup.sh",
  "postStartCommand": "bash .devcontainer/start-services.sh",
  
  // Container user
  "remoteUser": "vscode",
  
  // Security and capabilities
  "privileged": false,
  "init": true,
  
  // Mount the Docker socket for any container operations
  "mounts": [
    "source=/var/run/docker.sock,target=/var/run/docker-host.sock,type=bind"
  ],

  // Environment variables
  "containerEnv": {
    "DISPLAY": ":1",
    "VNC_RESOLUTION": "1920x1080",
    "VNC_COLOR_DEPTH": "24",
    "VNC_DPI": "96",
    "ENABLE_PRINTSCREEN": "true",
    "LANG": "en_US.UTF-8",
    "LANGUAGE": "en_US.UTF-8",
    "LC_ALL": "en_US.UTF-8"
  }
}